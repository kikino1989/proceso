<ion-card>
    <ion-card-header>
        <ion-card-title>
            <ion-grid>
                <ion-row>
                    <ion-col class="card-title-side">
                        <ion-radio *ngIf="!budget.snapshot; else closeButton" mode="md" [(checked)]="budget.active"></ion-radio>
                        {{ budget.name }}
                        <ng-template #closeButton>
                            <ion-button class="ion-no-padding ion-no-margin" (click)="dismiss()">
                                <ion-icon slot="icon-only" name="close"></ion-icon>
                            </ion-button>
                        </ng-template>
                    </ion-col>
                    <ion-col class="card-title-side right" size="2">
                        <ion-icon name="trash" color="danger" (click)="removeBudget(budget)"></ion-icon>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col class="card-title-side right">
                        <span class="card-tab-link" 
                            [ngClass]="{'active': isSummary() }"
                            (click)="setSummaryMode()">
                            <ion-icon name="paper"></ion-icon>
                        </span>
                        <span class="card-tab-link" 
                            [ngClass]="{'active': isStats() }"
                            (click)="setStatsMode()">
                            <ion-icon name="stats"></ion-icon>
                        </span>
                        <span *ngIf="!budget.snapshot" class="card-tab-link" 
                            [ngClass]="{'active': isEdit() || isSave() }"
                            (click)="setEditSaveMode()">
                            <ion-icon [name]="isSave() ? 'save' : 'create'"></ion-icon>
                        </span>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-card-title>
    </ion-card-header>
    <ion-card-content>
        <ng-container [ngSwitch]="mode">
            <summary *ngSwitchCase="'summary'" [budget]="budget"></summary>
            <edit *ngIf="mode == 'edit' || mode == 'save'"
                [budget]="budget" (budgetChanged)="setEditSaveMode($event);"
                [saveBudget]="saveBudget" [saveEvent]="saveEvent">
            </edit>
            <stats *ngSwitchCase="'stats'" [budget]="budget"></stats>
        </ng-container>
    </ion-card-content>
</ion-card>